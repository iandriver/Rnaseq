#!/usr/bin/env python
#-*-python-*-


# what happens if these fail?  Can that be user's responsbility?
import yaml, os, sys, re
from Rnaseq import *
from RnaseqGlobals import RnaseqGlobals


########################################################################
# Note: this is almost exactly the same as rnaseq.main(); only difference is usage,
# and if you move that to the commands, it is the name

def main():
    usage="usage: %s <cmd> <args> [opts]"
    argv=RnaseqGlobals.initialize(usage)       # not to be confused with sys.argv

    try:
        cmd=argv[1]
    except IndexError as ie:
        die(UserError(usage))
    cf=CmdFactory(program='provenance')
    cf.add_cmds(RnaseqGlobals.conf_value('provenance','cmds'))
    cmd=cf.new_cmd(cmd)

    cmd.run(argv, config=RnaseqGlobals.config)
    print "\ndone"

########################################################################


try:
    main()
except UserError as ue:
    die(sys.argv[0]+": "+str(ue))

sys.exit(0)

